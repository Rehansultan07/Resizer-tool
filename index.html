<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Photo Resizer | Govt Form Image Compressor</title>
    <style>
        :root { --primary: #2563eb; --sec: #64748b; --bg: #f8fafc; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 500px; text-align: center; }
        h1 { color: #1e293b; font-size: 24px; margin-bottom: 10px; }
        p { color: var(--sec); font-size: 14px; margin-bottom: 25px; }
        
        .upload-area { border: 2px dashed #cbd5e1; padding: 30px; border-radius: 15px; cursor: pointer; transition: 0.3s; margin-bottom: 20px; }
        .upload-area:hover { border-color: var(--primary); background: #eff6ff; }
        #fileInput { display: none; }
        
        .controls { text-align: left; background: #f1f5f9; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px; color: #475569; }
        input[type="range"] { width: 100%; margin-bottom: 15px; }
        
        .download-btn { background: var(--primary); color: white; border: none; width: 100%; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px; display: none; }
        .preview-img { max-width: 100%; border-radius: 10px; margin-top: 15px; display: none; border: 1px solid #ddd; }
        .info { font-size: 12px; margin-top: 10px; color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>Photo Resizer</h1>
    <p>Resize & Compress photos for Sarkari Forms</p>

    <div class="upload-area" onclick="document.getElementById('fileInput').click()">
        <i style="font-size: 40px; color: var(--sec);">ðŸ“·</i>
        <p>Click to Upload Photo</p>
        <input type="file" id="fileInput" accept="image/*">
    </div>

    <div class="controls" id="controls" style="display: none;">
        <label>Quality (Compress KB): <span id="qualVal">80</span>%</label>
        <input type="range" id="quality" min="10" max="100" value="80">
        
        <label>Width (Pixels):</label>
        <input type="number" id="width" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box;">
    </div>

    <img id="preview" class="preview-img">
    <div id="sizeInfo" class="info"></div>
    <button id="download" class="download-btn">Download Resized Image</button>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const qualityInput = document.getElementById('quality');
    const widthInput = document.getElementById('width');
    const preview = document.getElementById('preview');
    const downloadBtn = document.getElementById('download');
    const sizeInfo = document.getElementById('sizeInfo');
    let originalImage = null;

    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                originalImage = new Image();
                originalImage.src = event.target.result;
                originalImage.onload = () => {
                    widthInput.value = originalImage.width;
                    document.getElementById('controls').style.display = 'block';
                    processImage();
                };
            };
            reader.readAsDataURL(file);
        }
    };

    const processImage = () => {
        if (!originalImage) return;
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        const scale = widthInput.value / originalImage.width;
        canvas.width = widthInput.value;
        canvas.height = originalImage.height * scale;
        
        ctx.drawImage(originalImage, 0, 0, canvas.width, canvas.height);
        
        const quality = qualityInput.value / 100;
        const dataUrl = canvas.toDataURL('image/jpeg', quality);
        
        preview.src = dataUrl;
        preview.style.display = 'block';
        downloadBtn.style.display = 'block';
        
        // Calculate Size
        const head = 'data:image/jpeg;base64,'.length;
        const sizeInBytes = Math.round((dataUrl.length - head) * 3 / 4);
        sizeInfo.innerText = `Estimated Size: ${(sizeInBytes / 1024).toFixed(2)} KB`;
        
        downloadBtn.onclick = () => {
            const link = document.createElement('a');
            link.download = 'resized-image-digimitr.jpg';
            link.href = dataUrl;
            link.click();
        };
    };

    qualityInput.oninput = () => { document.getElementById('qualVal').innerText = qualityInput.value; processImage(); };
    widthInput.onchange = processImage;
</script>

</body>
</html>
